import React, { useState, useEffect, useRef, forwardRef } from "react";
import {
  Card,
  CardContent,
  CardHeader,
  Input,
  Button,
} from "./components/ui/CustomComponents";

function App() {
  const [password, setPassword] = useState("");
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  const dogRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    const handleMouseMove = (e: MouseEvent) => {
      if (dogRef.current) {
        const { left, top, width, height } =
          dogRef.current.getBoundingClientRect();
        const centerX = left + width / 2;
        const centerY = top + height / 2;
        setMousePosition({
          x: (e.clientX - centerX) / 20,
          y: (e.clientY - centerY) / 20,
        });
      }
    };

    window.addEventListener("mousemove", handleMouseMove);
    return () => window.removeEventListener("mousemove", handleMouseMove);
  }, []);

  const handleLogin = (e: React.FormEvent) => {
    e.preventDefault();
    console.log("Login attempted with password:", password);
  };

  return (
    <Card className="w-full max-w-md">
      <CardHeader className="space-y-1 flex items-center justify-center">
        <div className="w-48 h-48 flex items-center justify-center mb-4">
          <DogSVG
            ref={dogRef}
            eyePosition={mousePosition}
            eyesClosed={password.length > 0}
          />
        </div>
      </CardHeader>
      <CardContent>
        <form onSubmit={handleLogin} className="space-y-4">
          <Input
            type="password"
            placeholder="Password"
            value={password}
            onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
              setPassword(e.target.value)
            }
          />
          <Button type="submit">Login</Button>
        </form>
      </CardContent>
    </Card>
  );
}

interface DogSVGProps {
  eyePosition: { x: number; y: number };
  eyesClosed: boolean;
}

const DogSVG = forwardRef<SVGSVGElement, DogSVGProps>(
  ({ eyePosition, eyesClosed }, ref) => {
    return (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 745 746" ref={ref}>
        <defs>
          <style>{`.e{fill:#fbb042;}.f{fill:#010101;}.g{fill:#fefefe;}`}</style>
          <mask id="dogMask">
            <circle cx="372.5" cy="373" r="350" fill="white" />
          </mask>
        </defs>
        <circle cx="372.5" cy="373" r="350" fill="white" />
        <g mask="url(#dogMask)">
          <g>
            <path
              className="g"
              d="M341.03,410.35c10.44-4.19,21.65-6.22,32.86-6.91,7.19-.29,14.57-.3,21.5,1.9,3.35,1.17,7.2,3.02,8.15,6.79,.95,3.46-1.93,7.09-5.47,7.13-6.36-.03-11.93-3.64-17.99-5.12-12.68-3.74-26.03-2.82-39.05-3.79h0Zm124.78,44.28c11.3-8.41,24.95-14.13,39.13-14.71,16.75,.11,32.7,7.33,45.99,17.13,9.95,7.67,19.32,17.56,22.3,30.13,2.11,8.54-1.47,17.52-7.72,23.41-3.72,4.07-9.16,6.36-14.67,6.28-3.9-12.27-9.04-24.19-16.08-35,.53,10.41,3.64,21.71-1.56,31.46-4.28,6.13-11.51,9.33-18.34,11.77-6.95,2.43-14.49,1.67-21.56,.21-3.59-8.3-5.99-17.22-5.96-26.31-.13-4.88,.66-9.7,1.14-14.53-4.37,6.36-9.17,12.71-11.13,20.32-1.56,5.34-1.34,10.95-1.13,16.45-9.48,1.14-20.21-.17-27.29-7.17-5.69-5.35-7.61-13.59-6.69-21.14,1.78-15.45,11.36-29.08,23.57-38.3h0Zm-267.53,23.62c12.49-9.57,26.78-17.83,42.61-19.91,15.03-.98,29.36,5.95,41.37,14.4,8.42,6.14,16.15,13.91,20.24,23.65,3.38,7.93,2.57,17.55-2.44,24.62-5.41,7.85-14.88,12.12-24.2,12.86-2.13-12.36-8.74-23.7-18.1-31.97,2.28,8.18,4.51,16.59,4.02,25.17-.28,5.48-2.88,11.19-7.81,13.96-6.26,3.7-13.83,4.27-20.94,3.93-6.86-.32-14.11-3.3-17.53-9.58-5.03-8.93-4.06-19.57-4.03-29.42-2.61,5.62-5.61,11.15-7.11,17.21-1.58,5.69-1.41,11.67-1.03,17.51-8.43,.08-17.78-.7-24.43-6.48-6.43-5.66-6.89-15.3-4.86-23.07,3.75-13.49,13.69-24.17,24.24-32.88h0Z"
            />
          </g>
          <g>
            <path
              className="e"
              d="m 492.61,209.67 c 7.63,-4.52 16.83,-4.51 25.39,-3.67 17.44,1.81 34.62,6 51.11,11.94 8.74,3.37 17.68,6.94 24.87,13.11 3.26,2.61 4.15,6.91 4.89,10.8 1.51,8.97 2.09,18.07 2.36,27.15 0.33,21.21 -0.98,42.49 -4.52,63.42 -1.89,9.78 -3.8,19.79 -8.55,28.65 -1.94,3.31 -4.71,7.62 -9.2,6.71 -7.99,-1.24 -14.82,-6.06 -21.39,-10.47 -10.22,-7.2 -19.94,-15.33 -27.65,-25.24 -10.83,-13.52 -16.26,-30.81 -16.48,-48.03 0.03,-3.58 -0.07,-7.85 -3.41,-10.04 -4.7,-3.91 -12.84,-0.3 -12.81,5.87 -0.38,15.53 2.6,31.28 9.37,45.31 6.84,14.26 17.58,26.27 29.69,36.28 -11.29,12.56 -25.51,22.54 -41.22,28.75 -17.1,6.58 -36.21,8.36 -54.08,4 -18.51,-4.27 -35.67,-14.76 -47.5,-29.68 -11.88,-14.45 -18.39,-32.92 -19.59,-51.48 -1.26,-16.57 2.09,-33.12 7.43,-48.74 6.24,-17.42 13.83,-34.37 22.44,-50.73 22.28,2.79 44.34,7.07 66.3,11.68 3.06,0.83 6.53,-0.1 8.5,-2.66 4.06,-4.91 8.36,-9.84 14.05,-12.93"
            />
            <path
              className="f"
              d="m 469.22,208.58 c 9,-11 22.42,-18.8 36.85,-19.07 16.52,-0.34 32.88,2.91 48.81,6.98 13.84,3.7 27.53,8.44 39.98,15.61 7.19,4.44 14.95,9.77 17.61,18.23 3.51,10.52 3.95,21.74 4.69,32.72 0.87,25.1 -0.35,50.38 -5.19,75.06 -2.29,10.77 -5.11,21.59 -10.4,31.32 -3.32,6.06 -8.21,11.91 -15.15,13.76 -9.08,2.41 -18.47,-0.87 -26.41,-5.23 -8.45,-4.66 -16.28,-10.39 -23.73,-16.5 -12.11,-10.01 -22.85,-22.02 -29.69,-36.28 -6.77,-14.03 -9.75,-29.78 -9.37,-45.31 -0.03,-6.17 8.11,-9.78 12.81,-5.87 3.34,2.19 3.44,6.46 3.41,10.04 0.22,17.22 5.65,34.51 16.48,48.03 7.71,9.91 17.43,18.04 27.65,25.24 6.57,4.41 13.4,9.23 21.39,10.47 4.49,0.91 7.26,-3.4 9.2,-6.71 4.75,-8.86 6.66,-18.87 8.55,-28.65 3.54,-20.93 4.85,-42.21 4.52,-63.42 -0.27,-9.08 -0.85,-18.18 -2.36,-27.15 -0.74,-3.89 -1.63,-8.19 -4.89,-10.8 -7.19,-6.17 -16.13,-9.74 -24.87,-13.11 C 552.62,212 535.44,207.81 518,206 c -8.56,-0.84 -17.76,-0.85 -25.39,3.67 -5.69,3.09 -9.99,8.02 -14.05,12.93 -1.97,2.56 -5.44,3.49 -8.5,2.66 -21.96,-4.61 -44.02,-8.89 -66.3,-11.68 -26.16,-3.28 -52.86,-3.78 -78.91,0.77 -29.9,5.13 -58.49,15.92 -85.96,28.53 -2.74,1.25 -6.23,0.85 -8.43,-1.26 -6.38,-5.57 -12.59,-12.72 -21.46,-13.88 -10.42,-0.49 -20.6,2.58 -30.46,5.62 -17.19,5.67 -33.84,13.23 -49.01,23.15 -6.6,4.55 -13.28,9.56 -17.45,16.55 -2.37,3.91 -1.53,8.65 -1.11,12.95 2.18,16.81 5.87,33.39 9.65,49.91 3.34,13.99 6.59,28.03 11.03,41.73 2.33,6.52 4.65,13.25 9.03,18.72 2.4,3.26 7.05,2.48 10.47,1.69 10.26,-3.21 18.15,-11 25.36,-18.61 9.13,-10.21 17.84,-21.28 22.35,-34.37 4.44,-12.89 4.58,-26.71 4.28,-40.19 -0.48,-4.43 3.32,-8.68 7.78,-8.64 4.32,-0.31 8.25,3.48 8.33,7.76 0.58,17.25 -0.05,35.1 -6.89,51.21 -5.6,13.44 -14.76,24.98 -24.44,35.71 -8.92,9.6 -19.2,18.82 -32,22.64 -8.36,2.31 -18.55,2.11 -25.1,-4.31 -8.46,-8.08 -12.25,-19.57 -15.79,-30.4 -5.27,-17.56 -9.39,-35.44 -13.37,-53.33 -2.85,-13.44 -5.67,-26.93 -6.93,-40.63 -0.39,-5.45 -0.8,-11.23 1.59,-16.31 5.1,-11.09 14.98,-18.93 24.75,-25.78 17.18,-11.43 36.3,-19.75 55.99,-25.8 10.36,-2.96 21,-5.66 31.85,-5.48 10.99,0.37 20.52,6.94 28.18,14.31 33.92,-15.05 69.64,-27.36 106.88,-30.22 42.17,-3.43 84.13,4.51 125.25,12.96 z"
            />
            {eyesClosed ? (
              <>
                <path
                  id="b"
                  className="f eyes"
                  d="m 422.98,344.97 c 5.44,-6.85 14.09,-11.67 23.03,-10.81 9.59,0.55 17.54,7.54 22.13,15.58 2.16,3.85 4.71,8.24 3.64,12.82 -0.57849,0.99906 -2.60045,0.81721 -5.33593,-1.18603 -5.64203,-9.96051 -12.08216,-19.06749 -21.61216,-17.88749 -6.08297,-0.26149 -12.66912,2.93887 -19.49604,16.31784 -1.43691,1.46223 -5.82736,2.88902 -6.79587,0.24568 -1.17,-5.44 1.25,-10.8 4.44,-15.08 z"
                />
                <path
                  id="c"
                  className="f eyes"
                  d="m 277.41,346.67 c 6.41,-1.86 13.54,-1.08 19.23,2.47 5.84,3.84 11.57,9.54 12,16.92 0.36,1.44 -0.44,2.96 -1.54,3.85 -6.28,1.36 -12.11749,-13.34273 -18.46749,-13.39273 -5.11498,-1.36005 -14.5969,-0.76319 -20.49628,11.14385 C 265.65562,371.28595 262.22,379.55 258.02,379.49 c -2.66,-0.07 -4.34,-2.96 -3.31,-5.34 2.81,-11.86 10.4,-23.91 22.7,-27.48 z"
                />
              </>
            ) : (
              <>
                <circle
                  cx={422.98 + eyePosition.x}
                  cy={344.97 + eyePosition.y}
                  r="15"
                  fill="#010101"
                />
                <circle
                  cx={277.41 + eyePosition.x}
                  cy={346.67 + eyePosition.y}
                  r="15"
                  fill="#010101"
                />
              </>
            )}
            <path
              id="d"
              className="f"
              d="m 357.55,397.77 c 13.54,-1.66 27.57,-1.31 40.64,2.88 6.11,2.12 12.85,5.66 14.9,12.28 1.56,4.81 -1.05,9.64 -3.78,13.47 -8.69,11.05 -20.56,18.89 -31.95,26.86 -2.27,8.63 -2.87,17.73 -4.96,26.45 -2.85,-8.61 -6.58,-16.9 -9.83,-25.37 -10.76,-5.02 -21.45,-10.56 -30.62,-18.19 -4.65,-3.98 -9.46,-8.82 -10.33,-15.16 -0.56,-5.89 3.53,-11.03 8.2,-14.1 8.21,-5.49 18.09,-7.72 27.73,-9.12 m -16.52,12.58 c 13.02,0.97 26.37,0.05 39.05,3.79 6.06,1.48 11.63,5.09 17.99,5.12 3.54,-0.04 6.42,-3.67 5.47,-7.13 -0.95,-3.77 -4.8,-5.62 -8.15,-6.79 -6.93,-2.2 -14.31,-2.19 -21.5,-1.9 -11.21,0.69 -22.42,2.72 -32.86,6.91 z"
            />
            <path
              className="f"
              d="m 493,425 c 15.48,-3.22 31.59,0.09 45.88,6.35 16.9,7.54 32.47,19.09 42.67,34.73 5.21,7.91 8.28,17.18 8.67,26.66 19.59,-0.3 39.19,-0.2 58.79,-0.1 1.52,0.02 3.03,0.36 4.55,0.65 0.02,5.01 0.03,10.02 -0.01,15.04 -1.85,0.28 -3.7,0.53 -5.56,0.49 -20.49,-0.19 -40.98,-0.09 -61.46,0.02 -5.02,9.68 -12.92,18.5 -23.44,22.16 -8.08,2.91 -16.97,2.46 -25.16,0.28 -8.74,6.41 -19.08,11.04 -30.03,11.49 -10.28,0.64 -20.39,-1.94 -30.03,-5.23 -7.33,0.16 -14.88,0.64 -22.01,-1.62 -10.86,-2.83 -20.55,-10.19 -25.67,-20.25 -38.2,1.36 -76.19,5.83 -114.15,10.12 -8.51,16.5 -27.73,25.35 -45.85,24.31 -11.14,8.31 -25.31,12.4 -39.18,10.91 -7.54,-0.5 -14.79,-2.7 -22.11,-4.36 -11.81,0.68 -24.35,0.01 -34.81,-6.08 -1.28,-0.6 -2.6,-1.87 -4.11,-1.22 -18.62,4.5 -37.31,8.72 -56,12.9 -4.05,1.25 -8.86,-1.19 -10.05,-5.28 -1.61,-4.4 1.49,-9.6 6.07,-10.39 16.62,-3.74 33.23,-7.52 49.81,-11.44 -5.72,-13.85 -2.81,-29.83 4.51,-42.48 10.88,-18.51 28.28,-32.47 47.35,-41.89 12.85,-6.23 27.4,-10.73 41.77,-7.98 20,3.74 38.59,14.44 52.34,29.37 9.05,9.97 15.81,22.99 14.95,36.79 34.94,-3.92 69.93,-7.95 105.09,-9.27 -0.58,-15.1 5.08,-29.94 14.08,-41.9 12.9,-16.93 32.3,-28.56 53.1,-32.78 m -27.19,29.63 c -12.21,9.22 -21.79,22.85 -23.57,38.3 -0.92,7.55 1,15.79 6.69,21.14 7.08,7 17.81,8.31 27.29,7.17 -0.21,-5.5 -0.43,-11.11 1.13,-16.45 1.96,-7.61 6.76,-13.96 11.13,-20.32 -0.48,4.83 -1.27,9.65 -1.14,14.53 -0.03,9.09 2.37,18.01 5.96,26.31 7.07,1.46 14.61,2.22 21.56,-0.21 6.83,-2.44 14.06,-5.64 18.34,-11.77 5.2,-9.75 2.09,-21.05 1.56,-31.46 7.04,10.81 12.18,22.73 16.08,35 5.51,0.08 10.95,-2.21 14.67,-6.28 6.25,-5.89 9.83,-14.87 7.72,-23.41 -2.98,-12.57 -12.35,-22.46 -22.3,-30.13 -13.29,-9.8 -29.24,-17.02 -45.99,-17.13 -14.18,0.58 -27.83,6.3 -39.13,14.71 m -267.53,23.62 c -10.55,8.71 -20.49,19.39 -24.24,32.88 -2.03,7.77 -1.57,17.41 4.86,23.07 6.65,5.78 16,6.56 24.43,6.48 -0.38,-5.84 -0.55,-11.82 1.03,-17.51 1.5,-6.06 4.5,-11.59 7.11,-17.21 -0.03,9.85 -1,20.49 4.03,29.42 3.42,6.28 10.67,9.26 17.53,9.58 7.11,0.34 14.68,-0.23 20.94,-3.93 4.93,-2.77 7.53,-8.48 7.81,-13.96 0.49,-8.58 -1.74,-16.99 -4.02,-25.17 9.36,8.27 15.97,19.61 18.1,31.97 9.32,-0.74 18.79,-5.01 24.2,-12.86 5.01,-7.07 5.82,-16.69 2.44,-24.62 -4.09,-9.74 -11.82,-17.51 -20.24,-23.65 -12.01,-8.45 -26.34,-15.38 -41.37,-14.4 -15.83,2.08 -30.12,10.34 -42.61,19.91 z"
            />
          </g>
        </g>
      </svg>
    );
  }
);

DogSVG.displayName = "DogSVG";

export default App;
